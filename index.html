<!doctype html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="src/assets/Qnnect.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups" />
  <meta http-equiv="Cross-Origin-Embedder-Policy" content="unsafe-none" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Qrnnect - Akademik Personel Program Yöneticisi</title>
  <meta name="description"
    content="Akademik personelin haftalık programını ve iletişim bilgilerini içeren QR kodlu PDF çıktılar oluşturan web uygulaması" />

  <!-- Google API Script -->
  <script src="https://apis.google.com/js/api.js"></script>
  <!-- Google Sign-In Script -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Auto-update: detect new deployments and reload -->
  <script>
    (function () {
      var currentVersion = null;
      function checkVersion() {
        fetch('/version.json?_=' + Date.now(), { cache: 'no-store' })
          .then(function (r) { return r.json() })
          .then(function (d) {
            if (!currentVersion) { currentVersion = d.v; return; }
            if (d.v !== currentVersion) {
              // Unregister SW and reload
              if (navigator.serviceWorker) {
                navigator.serviceWorker.getRegistrations().then(function (registrations) {
                  for (let registration of registrations) { registration.unregister() }
                });
              }
              location.reload();
            }
          }).catch(function () { });
      }
      checkVersion();
      setInterval(checkVersion, 30000);

      // Register Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
          navigator.serviceWorker.register('/sw.js').then(function (registration) {
            console.log('SW registered: ', registration.scope);
          }, function (err) {
            console.log('SW registration failed: ', err);
          });
        });
      }
    })();
  </script>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>

</html>